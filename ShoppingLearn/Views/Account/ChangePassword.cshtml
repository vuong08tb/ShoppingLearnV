@{
	ViewData["Title"] = "Đổi mật khẩu";
}

<div class="col-md-9">
	<div class="panel panel-default">
		<div class="panel-heading">
			<h3 class="panel-title">
				<i class="fa fa-key"></i> Đổi mật khẩu
			</h3>
		</div>
		<div class="panel-body">
			<form asp-action="ChangePassword" asp-controller="Account" method="POST">
				<div asp-validation-summary="ModelOnly" class="text-danger"></div>

				<div class="form-group">
					<label for="currentPassword">
						<i class="fa fa-lock"></i> Mật khẩu hiện tại
					</label>
					<input type="password" name="currentPassword" id="currentPassword"
						   class="form-control" required
						   placeholder="Nhập mật khẩu hiện tại" />
				</div>

				<div class="form-group">
					<label for="newPassword">
						<i class="fa fa-key"></i> Mật khẩu mới
					</label>
					<input type="password" name="newPassword" id="newPassword"
						   class="form-control" required
						   placeholder="Nhập mật khẩu mới"
						   minlength="6" />
					<small class="form-text text-muted">Mật khẩu phải có ít nhất 6 ký tự</small>
				</div>

				<div class="form-group">
					<label for="confirmPassword">
						<i class="fa fa-check-circle"></i> Xác nhận mật khẩu mới
					</label>
					<input type="password" name="confirmPassword" id="confirmPassword"
						   class="form-control" required
						   placeholder="Nhập lại mật khẩu mới"
						   minlength="6" />
				</div>

				<div class="form-group">
					<button type="submit" class="btn btn-primary">
						<i class="fa fa-save"></i> Đổi mật khẩu
					</button>
				</div>
			</form>
		</div>
	</div>

	<div class="alert alert-info">
		<i class="fa fa-info-circle"></i>
		<strong>Lưu ý:</strong> Sau khi đổi mật khẩu thành công, bạn có thể tiếp tục sử dụng hệ thống với mật khẩu mới.
	</div>
</div>

@section Scripts {
	@{
		await Html.RenderPartialAsync("_ValidationScriptsPartial");
	}
	<script>
		// Validate password match
		document.querySelector('form').addEventListener('submit', function(e) {
			var newPassword = document.getElementById('newPassword').value;
			var confirmPassword = document.getElementById('confirmPassword').value;

			if (newPassword !== confirmPassword) {
				e.preventDefault();
				alert('Mật khẩu mới và xác nhận mật khẩu không khớp!');
				return false;
			}
		});
	</script>
}
